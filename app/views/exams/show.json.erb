<% json_a = Array.new %>
<% number_str = 1 %>
<% @questions.each do |q| %>
  <% q_hash = Hash.new %>
  <% q_hash[:number] = q.number %>
  <% if q.group_number %>
    <% q_hash[:group_number] = q.group_number %>
  <% else %>
    <% q_hash[:group_number] = q.number %>
  <% end %>
  <% if q.is_question%>
    <% q_hash[:number_str] = number_str.to_s %>
    <% number_str = number_str + 1 %>
  <% else %>
    <% q_hash[:number_str] = "" %>
  <% end %>
  <% q_hash[:point] = q.question_point %>
  <% q_hash[:is_question] = q.is_question %>
  <% q_hash[:sentence] = q.question_sentence %>
  <% q_hash[:message] = q.question_message %>
  <% if q.is_question %>
    <% q_hash[:selection] = q.question_selection %>
    <% q_hash[:answer] = q.question_answer %>
  <% end %>
  <% json_a << q_hash %>
<% end %>

<%= json_a.to_json.html_safe %>
